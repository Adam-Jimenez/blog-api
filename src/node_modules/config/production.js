const _ = require('lodash')

module.exports = {
    env: 'production',
    port: 3000,
    adminPassword: process.env.ADMIN_PASS,
    database: {
        schemaName: 'blog',
        username: process.env.DB_USER,
        password: process.env.DB_PASS
    },
    validateConfig: () => {
        // TODO: maybe validate with joi
        const requiredEnvironnementVariables = ['ADMIN_PASS', 'DB_USER', 'DB_PASS']

        _.each(requiredEnvironnementVariables, (variable) => {
            if (!process.env[variable]) {
                throw new Error('Environnement variable ADMIN_PASS is not set')
            }
        })
    }
}
