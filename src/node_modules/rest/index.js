const express = require('express')
const app = express()
const cors = require('cors')
const bodyParser = require('body-parser')
const controllers = require('./controllers')
const middlewares = require('./middlewares')

app.use(cors())
app.use(bodyParser.json())

/* POSTS */

app.get('/posts',
    middlewares.pagination,
    controllers.posts.getPaginatedPosts
)

app.get('/posts/latest',
    controllers.posts.getLatestPost
)

app.get('/posts/:id',
    controllers.posts.getPostById
)

app.post('/posts',
    middlewares.authentification.adminAuthentification,
    controllers.posts.createPost
)


module.exports = app
