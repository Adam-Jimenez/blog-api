const errors = require('errors')
const db = require('db')

module.exports = {
    getPostComments: (req, res) => {
        const postId = req.params.postId
        db.Post.findById(postId)
        .then((post) => {
            return post.getComments()
        })
        .then((comments) => {
            res.json(comments)
        })
        .catch(errors.handleRestError(req, res))
    },
    createComment: (req, res) => {
        const postId = req.params.postId
        const content = req.body.content

        db.Comment.create({
            post_id: postId,
            content: content
        })
        .then((comment) => {
            res.json(comment)
        })
        .catch(errors.handleRestError(req, res))
    }
}
